document.addEventListener("DOMContentLoaded", () => {

    const menuTrigger = document.getElementById('mobileMenuTrigger');
    let mobileMenuButton = document.querySelectorAll('.mobile-menu-button-js');
    let mobileMenu = document.querySelectorAll('.mobile-menu-js');
    let page = document.querySelectorAll('.scrollable-js');

    // Trigger function for mobile menu button
    // =======================================
    menuTrigger.onclick = function () {

        // Toggle to show and hide mobile menu
        // ===================================
        for (let x of mobileMenu) {
            x.classList.toggle('mobile-menu-js--visible');
        }

        // Toggle to swap burger icon and close icon on mobile menu button
        // ===============================================================
        for (let x of mobileMenuButton) {
            x.classList.toggle('mobile-menu-button-js--visible');
        }

        // Toggle to turn on and off scroll for when mobile menu is open
        // =============================================================
        for (let x of page) {
            x.classList.toggle('scrollable-js--disabled');
        }
    };

    // Add active class to nav list item when section is within view
    // =============================================================
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            const id = entry.target.getAttribute("id");
            if (entry.intersectionRatio > 0) {
                document
                    .querySelector(`nav li a[href="#${id}"]`)
                    .parentElement.classList.add("active");
            } else {
                document
                    .querySelector(`nav li a[href="#${id}"]`)
                    .parentElement.classList.remove("active");
            }
        });
    });

    // Track all sections that have an `id` applied
    // ============================================
    document.querySelectorAll("section[id]").forEach(section => {
        observer.observe(section);
    });
});